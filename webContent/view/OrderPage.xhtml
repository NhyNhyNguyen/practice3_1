<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>

	<ui:composition template="/layouts/basic-8.xhtml">
		<ui:define name="title">Order Page</ui:define>
		<ui:define name="content">
			<h2 class="mt-0">Available
				Orders(#{orderController.orders.size()})</h2>
			<h:form id="order-list">
				<p:dataTable id="orderTable" widgetVar="orderTable"
					value="#{orderController.orders}" var="order" sortMode="single"
					paginator="true" paginatorPosition="bottom" rows="10"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
					rowsPerPageTemplate="5,10,{ShowAll|'All'}"
					rowStyleClass="#{row % 2 == 0 ? 'tableRow' : ''}"
					emptyMessage="No orders found with given criteria"
					rowIndexVar="row"
					filteredValue="#{orderController.filterOrders}">
					<f:facet name="header">
						<div id="new-order">
							<p:outputPanel
								style="height:30px; padding-bottom:20 px; text-align:right">
								<p:commandButton value="New Order" icon="ui-icon-plus"
									style="color:#fff;"
									actionListener="#{homeController.getUrl('Business Processes/StartProcess/start3.ivp' )}">
								</p:commandButton>
							</p:outputPanel>
						</div>
					</f:facet>

					<p:column headerText="ID" style="width:20px">
						<h:outputText value="#{row + 1}" />
					</p:column>
					<p:column headerText="Customer Name"
						filterBy="#{order.customer.name}" filterMatchMode="contains"
						style="" styleClass="filterColumn" sortBy="#{order.customer.name}">
						<h:outputText value="#{order.customer.name}" />
					</p:column>

					<p:column headerText="Product Type" filterBy="#{order.productType}"
						filterMatchMode="exact" style="width:100px"
						styleClass="filterColumn">
						<f:facet name="filter">
							<p:selectOneMenu onchange="PF('orderTable').filter()"
								id="nameFilter" style="width:100%">
								<f:selectItem itemLabel="All" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems value="#{orderController.types}" />
							</p:selectOneMenu>
						</f:facet>
						<h:outputText value="#{order.productType}" />
					</p:column>
					<p:column headerText="Connected power"
						filterBy="#{order.connectedPower}" filterMatchMode="contains"
						sortBy="#{order.connectedPower}">
						<h:outputText
							value="#{order.connectedPower.toString().concat(' Kw')}" />
					</p:column>

					<p:column headerText="Cable length" filterBy="#{order.cableLength}"
						style="width:120px" filterMatchMode="contains"
						sortBy="#{order.cableLength}">
						<h:outputText value="#{order.cableLength.toString().concat(' m')}" />
					</p:column>

					<p:column headerText="Required meter"
						filterBy="#{order.requireMeter}" filterMatchMode="exact">
						<f:facet name="filter">
							<p:selectOneMenu onchange="PF('orderTable').filter()"
								id="filterRequireMeter" style="width:100%">
								<f:selectItem itemLabel="All" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItem itemLabel="YES" itemValue="true" />
								<f:selectItem itemLabel="NO" itemValue="false" />
							</p:selectOneMenu>
						</f:facet>
						<p:selectBooleanCheckbox value="#{order.requireMeter}"
							disabled="true" />
					</p:column>

					<p:column headerText="Battery" style="width:80px"
						filterBy="#{order.battery}" filterMatchMode="exact">
						<f:facet name="filter">
							<p:selectOneMenu onchange="PF('orderTable').filter()"
								id="filterBattery" style="width:100%">
								<f:selectItem itemLabel="All" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems value="#{orderController.batteryTypes}" />
							</p:selectOneMenu>
						</f:facet>
						<h:outputText
							value="#{order.battery == null ? '' : order.battery}"
							styleClass="battery battery-#{order.battery}" />
					</p:column>

					<p:column headerText="Total" sortBy="#{order.total}"
						style="width:60px" filterBy="#{order.total}"
						filterMatchMode="contains">
						<h:outputText value="#{order.total}" />
					</p:column>
					<p:column headerText="Status" style="width:90px"
						filterBy="#{order.status.getName()}" filterMatchMode="contains">
						<f:facet name="filter">
							<p:selectOneMenu onchange="PF('orderTable').filter()"
								id="filterStatus" style="width:100%">
								<f:selectItem itemLabel="All" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems value="#{orderController.statusTypes}" />
							</p:selectOneMenu>
						</f:facet>
						<h:outputText value="#{order.status.getName()}"
							styleClass="status-#{order.status.getName()}" style="" />

					</p:column>
				</p:dataTable>
			</h:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>