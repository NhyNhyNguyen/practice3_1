<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<cc:interface componentType="IvyComponent">
	<cc:attribute name="customer" type="entity.CustomerEntity"
		shortDescription="Customer Data" />
	<cc:attribute name="order" type="entity.OrderEntity"
		shortDescription="Order Data" />
	<cc:attribute name="editable" type="java.lang.Boolean"
		shortDescription="Can edit info" />
	<cc:attribute name="title" type="java.lang.String"
		shortDescription="Can edit info" />
	<cc:attribute name="showManagerComment" type="java.lang.Boolean"
		shortDescription="Show manager comment field" />
	<cc:attribute name="formId" type="java.lang.String"
		shortDescription="Show form Id" />

</cc:interface>

<cc:implementation>

	<div class="">
		<p:messages />
		<h2>#{cc.attrs.title}</h2>
		<p:fieldset legend="Customer Info">
			<p:panelGrid columns="2" layout="grid"
				styleClass="ui-panelgrid-blank"
				columnClasses="ui-g-12 ui-md-3 ui-lg-2, 
						ui-g-12 ui-md-9 ui-lg-4, 
						ui-g-12 ui-md-3 ui-lg-2, 
						ui-g-12 ui-md-9 ui-lg-4">

				<p:outputLabel for="dataCustomerName" value="Name" />
				<p:inputText id="dataCustomerName" value="#{cc.attrs.customer.name}"
					required="#{cc.attrs.editable}" readonly="#{!cc.attrs.editable}"></p:inputText>

				<p:outputLabel for="dataCustomerPhone" value="Phone" />
				<p:inputText id="dataCustomerPhone"
					value="#{cc.attrs.customer.phone}" required="#{cc.attrs.editable}"
					readonly="#{!cc.attrs.editable}"
					validatorMessage="Invalid phone format - Phone is number">
					<f:validateRegex pattern="^[0-9]+$" />
				</p:inputText>

				<p:outputLabel for="dataCustomerBirthday" value="Birthday" />
				<p:datePicker id="dataCustomerBirthday"
					value="#{cc.attrs.customer.birthday}" timeOnly="false"
					pattern="dd.MM.yyyy" style="width: 100%"
					required="#{cc.attrs.editable}" readonly="#{!cc.attrs.editable}" />

				<p:outputLabel for="dataCustomerAddress" value="Address" />
				<p:inputText id="dataCustomerAddress"
					value="#{cc.attrs.customer.address}"
					required="#{cc.attrs.editable}" readonly="#{!cc.attrs.editable}"></p:inputText>

				<p:outputLabel for="dataCustomerEmail" value="Email" />
				<p:inputText id="dataCustomerEmail"
					value="#{cc.attrs.customer.email}" required="#{cc.attrs.editable}"
					readonly="#{!cc.attrs.editable}"
					validatorMessage="Invalid email format - Email@gmail.com">
					<f:validateRegex pattern="^(.+)@(.+).(.+)$" />
				</p:inputText>

				<p:outputLabel for="dataCustomerGender" value="Gender" />
				<p:selectOneRadio id="dataCustomerGender"
					disabled="#{!cc.attrs.editable}"
					value="#{cc.attrs.customer.gender}">
					<f:selectItem itemLabel="Male" itemValue="true" />
					<f:selectItem itemLabel="Female" itemValue="false" />
				</p:selectOneRadio>

				<p:outputLabel for="dataCustomerDocuments" value="Documents" />
				<p:fileUpload id="dataCustomerDocuments" mode="simple"
					multiple="false" skinSimple="true" sizeLimit="3072000"
					invalidSizeMessage="Maximum file size allowed is 3MB" update=""
					label="Choose File" value="#{cc.attrs.customer.file}"
					rendered="#{cc.attrs.editable}" />
				<p:panelGrid columns="2" rendered="#{!cc.attrs.editable}">
					<p:commandButton value="Download" ajax="false"
						rendered="#{cc.attrs.customer.file != null}"
						actionListener="#{logic.fileDownload}"
						icon="ui-icon-cloud-download" id="downloadFileButton">
						<p:fileDownload value="#{data.fileDownload}" />
					</p:commandButton>
					<p:outputLabel value ="#{cc.attrs.customer.fileName != null ? cc.attrs.customer.fileName : 'No File'}" >
					</p:outputLabel>
				</p:panelGrid>

			</p:panelGrid>
		</p:fieldset>
		<br />

		<p:fieldset legend="Order Info">
			<p:panelGrid columns="2" layout="grid"
				styleClass="ui-panelgrid-blank"
				columnClasses="ui-g-12 ui-md-3 ui-lg-2, 
						ui-g-12 ui-md-9 ui-lg-4, 
						ui-g-12 ui-md-3 ui-lg-2, 
						ui-g-12 ui-md-9 ui-lg-4">

				<p:outputLabel for="dataOrderProductType" value="Product Type"
					rendered="#{cc.attrs.editable}" styleClass="ui-label" />
				<p:selectOneMenu id="dataOrderProductType"
					value="#{cc.attrs.order.productType}" style="width:150px"
					required="#{cc.attrs.editable}" rendered="#{cc.attrs.editable}">
					<f:selectItem itemLabel="Select product type" itemValue=""
						noSelectionOption="true" />
					<f:selectItem itemLabel="Solar" itemValue="Solar" />
					<f:selectItem itemLabel="Power" itemValue="Power" />
					<p:ajax update="#{cc.attrs.formId}" />
				</p:selectOneMenu>

				<p:outputLabel for="dataOrderProductType2" value="Product Type"
					rendered="#{!cc.attrs.editable}" styleClass="ui-label" />
				<p:inputText id="dataOrderProductType2"
					value="#{cc.attrs.order.productType}"
					rendered="#{!cc.attrs.editable}" styleClass="ui-label" />


				<p:outputLabel for="dataOrderConnectedPower" value="Connected Power" />
				<p:inputText id="dataOrderConnectedPower"
					value="#{cc.attrs.order.connectedPower}"
					required="#{cc.attrs.editable}" readonly="#{!cc.attrs.editable}"></p:inputText>

				<p:outputLabel for="dataOrderCableLength" value="Cable Length" />
				<p:inputText id="dataOrderCableLength"
					value="#{cc.attrs.order.cableLength}"
					readonly="#{!cc.attrs.editable}"></p:inputText>


				<p:outputLabel for="dataOrderRequireMeter" value="Require Meter" />
				<p:selectBooleanCheckbox id="dataOrderRequireMeter"
					value="#{cc.attrs.order.requireMeter}"
					disabled="#{!cc.attrs.editable}" />

				<p:outputLabel for="dataOrderBattery" value="Battery"
					rendered="#{cc.attrs.order.productType.equals('Solar') and !cc.attrs.editable}" />
				<p:inputText id="dataOrderBattery" value="#{cc.attrs.order.battery}"
					readonly="#{!cc.attrs.editable}"
					rendered="#{cc.attrs.order.productType.equals('Solar') and !cc.attrs.editable}"></p:inputText>

				<p:outputLabel for="dataOrderBattery2" value="Battery"
					rendered="#{cc.attrs.order.productType.equals('Solar') and cc.attrs.editable}" />
				<p:selectOneRadio id="dataOrderBattery2"
					rendered="#{cc.attrs.order.productType.equals('Solar') and cc.attrs.editable}"
					value="#{cc.attrs.order.battery}">
					<f:selectItem itemLabel="Small" itemValue="Small" />
					<f:selectItem itemLabel="Medium" itemValue="Medium" />
					<f:selectItem itemLabel="Big" itemValue="Big" />
				</p:selectOneRadio>
				<p:outputLabel for="dataOrderTotal" value="Total" />
				<p:inputText id="dataOrderTotal" value="#{cc.attrs.order.total}"
					readonly="#{!cc.attrs.editable}"></p:inputText>
				<p:outputLabel for="dataOrderCleckComment" value="Cleck Comment" />
				<p:inputTextarea id="dataOrderCleckComment" rows="2" cols="33"
					value="#{cc.attrs.order.cleckComment}"
					readonly="#{!cc.attrs.editable}" />

				<p:outputLabel rendered="#{cc.attrs.showManagerComment}"
					for="dataOrderManageComment" value="Manager Comment" />
				<p:inputTextarea rendered="#{cc.attrs.showManagerComment}"
					id="dataOrderManageComment" rows="2" cols="33"
					value="#{cc.attrs.order.managerComment}" />
			</p:panelGrid>
		</p:fieldset>
		<br />
	</div>
	<style>
</style>
	<script>
		
	</script>
</cc:implementation>
</html>